---
title: Alioth 项目设计与开发文档
output: pdf_document
---

# Alioth 项目设计与开发文档

> 王雨泽 2019/04/14  
> alioth-version : 0.8  
> aliothc-version : 0.1

<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->
<!-- code_chunk_output -->

* [Alioth 项目设计与开发文档](#alioth-项目设计与开发文档)
* [1. Alioth 语言设计](#1-alioth-语言设计)
	* [1.1. 词法设计](#11-词法设计)
		* [1.1.1. 关键字表](#111-关键字表)
		* [1.1.2. 运算符表](#112-运算符表)
		* [1.1.3. 常量](#113-常量)
	* [1.2. 元语法特性设计](#12-元语法特性设计)
	* [1.3. 类型系统设计](#13-类型系统设计)
	* [1.4. 静态泛型语法结构支持](#14-静态泛型语法结构支持)
	* [1.5. 动态泛型语法结构支持](#15-动态泛型语法结构支持)
	* [1.6. 泛化运算符语法结构支持](#16-泛化运算符语法结构支持)
	* [1.7. 特化运算符语法结构支持](#17-特化运算符语法结构支持)
	* [1.8. 混合泛型语法结构支持](#18-混合泛型语法结构支持)
	* [1.9. 异步与并发语法结构支持](#19-异步与并发语法结构支持)
* [2. Alioth 编译器设计与开发](#2-alioth-编译器设计与开发)
* [3. Alioth 基础库设计与开发](#3-alioth-基础库设计与开发)
* [4. Alioth 辅助支持插件设计与开发](#4-alioth-辅助支持插件设计与开发)

<!-- /code_chunk_output -->

<!-- pagebreak -->

# 1. Alioth 语言设计

Alioth 编程语言的主要设计思想是降低编码成本,降低维护难度,提高代码复用性.

Alioth 在语言层次对并发开发提供支持.

## 1.1. 词法设计

### 1.1.1. 关键字表

`module` `class` `enum` `method` `operator` `asm`

`this` `null` `true` `false`

`if` `else` `loop`

`switch` `case` `default`

`assume` `otherwise`

`return` `break` `continue`

`var` `ref` `ptr` `rel`

`const` `meta` `public` `private` `entry`

`int8` `int16` `int32` `int64`

`uint8` `uint16` `uint32` `uint64`

`float32` `float64`

`bool`

`void`

`and` `or` `xor` `not`

`new` `delete`

`as` `as!`

### 1.1.2. 运算符表

|运算符|书写|结合性方向|目数|备注|
|---|---|---|---|---|
|成员运算符|`.`|左结合性|双目运算符|作为特化运算符可重载|
|下标运算|`[]`||后缀单目运算符|作为泛化运算符可重载|
|自变运算符|`++` `--`||后缀单目运算符|作为泛化运算符可重载|
|自变运算符|`++` `--`||前缀单目运算符|作为泛化运算符可重载|
|正负号|`+` `-`||前缀单目运算符|作为泛化运算符可重载|
|取址与解引用|`&` `*`||前缀单目运算符|不可重载|
|逻辑非|`not`||前缀单目运算符|作为泛化运算符可重载|
|位去反|`~`||前缀单目运算符|作为泛化运算符可重载|
|位移运算符|`<<` `>>`|左结合性|双目运算符|作为泛化运算符可重载|
|位与运算符|`&`|左结合性|双目运算符|作为泛化运算符可重载|
|位异或运算符|`^`|左结合性|双目运算符|作为泛化运算符可重载|
|位或运算符|`|`|左结合性|双目运算符|作为泛化运算符可重载|
|乘除余运算|`*` `/` `%`|左结合性|双目运算符|作为泛化运算符可重载|
|加减运算|`+` `-`|左结合性|双目运算符|作为泛化运算符可重载|
|范围运算符|`..`|左结合性|双目运算符|作为特化运算符可重载|
|关系运算符|`>` `<` `==` `!=` `<=` `>=`|左结合性|双目运算符|作为泛化运算符可重载|
|逻辑且|`and`|左结合性|双目运算符|作为泛化运算符可重载|
|逻辑或|`or`|左结合性|双目运算符|作为泛化运算符可重载|
|赋值运算符|`=` `+=` `-=` `*=` `/=` `%=` `&=` `|=` `^=` `<<=` `>>=`|右结合性|双目运算符|作为泛化运算符可重载|
|构造运算符|`{}` `{=}` `{<<}` `[...]`|||特化运算符|
|析构运算符|`{~}`|||特化运算符|
|定位运算符|`#`|左结合性|双目运算符|特化运算符|
|移动运算符|`operator move`|||特化运算符|
|强制类型转换|`as` `as!`|||特化运算结构|
|参数包|`...`|||特化运算主体|

### 1.1.3. 常量

* 数字常量

  ~~~ebnf
  binary digit = "0" | "1" ;

  octal digit = binary digit | "2" | "3" | "4" | "5" | "6" | "7";

  decimal digit = octal digit | "8" | "9" ;

  hex digit = 
    decimal digit
      | 'a' | 'b' | 'c' | 'd' | 'e' | 'f'
      | 'A' | 'B' | 'C' | 'D' | 'E' | 'F' ;
  ~~~

  * 十进制常量

    十进制常量的数据类型总是`int32`  
    ~~~ebnf
    literal decimal number = 
      decimal digit , { { "'" } , decimal digit } ;
    ~~~

  * 二进制常量
    
    二进制常量以`0b`开头,所占位宽取决于书写长度
    ~~~ebnf
    literal binary number = 
      "0b" , binary digit , { { "'" } , binary digit } ;
    ~~~
  
  * 八进制常量

    八进制常量以`0o`开头,所占位宽取决于书写长度
    ~~~ebnf
    literal octal number = 
      "0o" , octal digit , { { "'" } , octal digit } ;
    ~~~
  
  * 十六进制常量

    十六进制常量以`0x`开头,所占位宽取决于书写长度
    ~~~ebnf
    literal hex number = 
      "0x , hex digit , { { "'" } , hex digit } ;
    ~~~
  
  * 浮点数常量

    Alioth支持指数表达法来表达一个浮点数
    ~~~ebnf
    float point number =
      literal decimal number , "." literal decimal number , [ "e" , [ "+" | "-" ] , literal decimal number ] ;
    ~~~

* 模板字符串

  Alioth中并未提供处理字符类信息所需的基础数据类型比如`C++`语言中的`char`.这是由于Alioth认为字符属于符合数据类型,它只是结构比较简单.

  Alioth中的字符数据类型由基础库提供,或由第三方SDK提供,这样可以消除基础数据类型过于简单而无法适应更多字符集的问题.

  Alioth提供了字符字面表达法`'...'`和字符串字面表达法`"..."`,作为对字符类或字符串类的构造方法的简便调用的语法糖.
  
  字符串表达法允许以`${}`包含表达式内容,方便将可打印的内容插入字符串上下文,此语法特性称为模板字符串.

## 1.2. 元语法特性设计



## 1.3. 类型系统设计

## 1.4. 静态泛型语法结构支持

## 1.5. 动态泛型语法结构支持

## 1.6. 泛化运算符语法结构支持

## 1.7. 特化运算符语法结构支持

## 1.8. 混合泛型语法结构支持

## 1.9. 异步与并发语法结构支持

# 2. Alioth 编译器设计与开发

# 3. Alioth 基础库设计与开发

# 4. Alioth 辅助支持插件设计与开发